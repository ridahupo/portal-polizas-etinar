<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Pólizas Etinar - Orchard Assistance</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --orchard-green: #2d5016;
            --orchard-navy: #2c3e50;
            --orchard-light-green: #4a7c2c;
            --alert-red: #dc3545;
            --alert-yellow: #ffc107;
            --alert-green: #28a745;
            --bg-light: #f8f9fa;
            --text-dark: #1a1a1a;
            --text-muted: #6c757d;
            --border-color: #e1e4e8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--text-dark);
        }

        /* Login Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: white;
            border-radius: 20px;
            padding: 50px 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            max-width: 420px;
            width: 100%;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-logo {
            text-align: center;
            margin-bottom: 35px;
        }

        .login-logo img {
            height: 60px;
            margin-bottom: 15px;
        }

        .login-title {
            font-family: 'Crimson Pro', serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--orchard-navy);
            text-align: center;
            margin-bottom: 10px;
        }

        .login-subtitle {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--orchard-navy);
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--orchard-green);
            box-shadow: 0 0 0 3px rgba(45, 80, 22, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--orchard-green) 0%, var(--orchard-light-green) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(45, 80, 22, 0.3);
        }

        .error-message {
            background: #fee;
            color: var(--alert-red);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            text-align: center;
            border-left: 4px solid var(--alert-red);
        }

        /* Dashboard Styles */
        .dashboard {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .navbar {
            background: linear-gradient(135deg, var(--orchard-navy) 0%, #34495e 100%);
            color: white;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .navbar-brand img {
            height: 45px;
        }

        .navbar-title {
            font-family: 'Crimson Pro', serif;
            font-size: 24px;
            font-weight: 700;
        }

        .navbar-user {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            font-size: 15px;
        }

        .user-role {
            font-size: 12px;
            opacity: 0.8;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 40px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border-left: 4px solid var(--orchard-green);
            animation: slideInUp 0.5s ease-out;
            animation-fill-mode: both;
        }

        .stat-card:nth-child(2) { animation-delay: 0.1s; }
        .stat-card:nth-child(3) { animation-delay: 0.2s; }
        .stat-card:nth-child(4) { animation-delay: 0.3s; }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .stat-card.alert {
            border-left-color: var(--alert-red);
        }

        .stat-card.warning {
            border-left-color: var(--alert-yellow);
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--orchard-navy);
            font-family: 'Crimson Pro', serif;
        }

        .stat-change {
            font-size: 13px;
            margin-top: 8px;
            color: var(--text-muted);
        }

        /* Filters */
        .filters-section {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .filters-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--orchard-navy);
            margin-bottom: 20px;
            font-family: 'Crimson Pro', serif;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .filter-group select,
        .filter-group input {
            padding: 10px 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--orchard-green);
        }

        .clear-filters-btn {
            background: #f8f9fa;
            border: 2px solid var(--border-color);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.3s ease;
        }

        .clear-filters-btn:hover {
            background: var(--border-color);
        }

        /* Table */
        .table-section {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            overflow-x: auto;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--orchard-navy);
            font-family: 'Crimson Pro', serif;
        }

        .export-btn {
            background: var(--orchard-green);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            background: var(--orchard-light-green);
            transform: translateY(-2px);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        thead {
            background: #f8f9fa;
            border-bottom: 2px solid var(--border-color);
        }

        th {
            padding: 15px 12px;
            text-align: left;
            font-weight: 700;
            color: var(--orchard-navy);
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border-color);
        }

        tbody tr {
            transition: background 0.2s ease;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .status-badge.vencida {
            background: #fee;
            color: var(--alert-red);
        }

        .status-badge.activa {
            background: #e7f7e7;
            color: var(--alert-green);
        }

        .status-badge.proxima {
            background: #fff3cd;
            color: #856404;
        }

        .indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .indicator.red { background: var(--alert-red); }
        .indicator.yellow { background: var(--alert-yellow); }
        .indicator.green { background: var(--alert-green); }

        .tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            margin: 2px;
        }

        .tag.confianza {
            background: #e3f2fd;
            color: #1976d2;
        }

        .tag.equisuiza {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .tag.fiel-cumplimiento {
            background: #fff3e0;
            color: #e65100;
        }

        .tag.buen-uso {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .tag.responsabilidad {
            background: #fce4ec;
            color: #c2185b;
        }

        .money {
            font-weight: 600;
            color: var(--orchard-navy);
            font-family: 'Crimson Pro', serif;
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .chart-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .chart-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--orchard-navy);
            margin-bottom: 20px;
            font-family: 'Crimson Pro', serif;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 15px;
                padding: 20px;
            }

            .container {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Mock data - En producción esto vendría de Notion API
        const mockPolizasData = [
            {
                id: 1,
                contratante: "ETINAR",
                tipoFianza: "FIEL CUMPLIMIENTO DE CONTRATO",
                proyecto: "HIPERMARKET",
                aseguradora: "CONFIANZA",
                estado: "VENCIDA",
                numeroPoliza: "499485",
                montoCobertura: 816857.56,
                prima: 2042.14,
                fechaInicio: "2024-10-08",
                fechaExpiracion: "2025-01-07",
                diasRestantes: -6,
                diasTotales: 91
            },
            {
                id: 2,
                contratante: "ETINAR",
                tipoFianza: "BUEN USO DE ANTICIPO",
                proyecto: "HIPERMARKET",
                aseguradora: "CONFIANZA",
                estado: "VENCIDA",
                numeroPoliza: "465225",
                montoCobertura: 500000.00,
                prima: 1250.00,
                fechaInicio: "2024-10-08",
                fechaExpiracion: "2025-01-07",
                diasRestantes: -6,
                diasTotales: 91
            },
            {
                id: 3,
                contratante: "ETINAR",
                tipoFianza: "FIEL CUMPLIMIENTO DE CONTRATO",
                proyecto: "PROYECTO ALPHA",
                aseguradora: "EQUISUIZA",
                estado: "VENCIDA",
                numeroPoliza: "76079",
                montoCobertura: 5378.55,
                prima: 33.86,
                fechaInicio: "2024-11-09",
                fechaExpiracion: "2025-01-08",
                diasRestantes: -5,
                diasTotales: 60
            },
            {
                id: 4,
                contratante: "LIPIDAVA",
                tipoFianza: "INCENDIO",
                proyecto: "BODEGA CENTRAL",
                aseguradora: "EQUISUIZA",
                estado: "VENCIDA",
                numeroPoliza: "933",
                montoCobertura: 1111268.88,
                prima: 2005.76,
                fechaInicio: "2024-01-31",
                fechaExpiracion: "2025-01-31",
                diasRestantes: 18,
                diasTotales: 366
            },
            {
                id: 5,
                contratante: "ETINAR",
                tipoFianza: "BUEN USO DE ANTICIPO",
                proyecto: "TORRE BETA",
                aseguradora: "EQUISUIZA",
                estado: "ACTIVA",
                numeroPoliza: "73680",
                montoCobertura: 21514.20,
                prima: 36.72,
                fechaInicio: "2024-11-09",
                fechaExpiracion: "2025-03-09",
                diasRestantes: 55,
                diasTotales: 120
            },
            {
                id: 6,
                contratante: "VIGERANO / ETINAR",
                tipoFianza: "INCENDIO",
                proyecto: "COMPLEJO RESIDENCIAL",
                aseguradora: "EQUISUIZA",
                estado: "VENCIDA",
                numeroPoliza: "118174",
                montoCobertura: 260000.00,
                prima: 188.65,
                fechaInicio: "2025-01-07",
                fechaExpiracion: "2026-01-07",
                diasRestantes: 359,
                diasTotales: 365
            },
            {
                id: 7,
                contratante: "ETINAR",
                tipoFianza: "BUEN USO DE ANTICIPO",
                proyecto: "PLAZA COMERCIAL",
                aseguradora: "EQUISUIZA",
                estado: "ACTIVA",
                numeroPoliza: "73322",
                montoCobertura: 342202.86,
                prima: 264.27,
                fechaInicio: "2024-12-13",
                fechaExpiracion: "2025-11-02",
                diasRestantes: 293,
                diasTotales: 324
            },
            {
                id: 8,
                contratante: "ETINAR / INBALNOR",
                tipoFianza: "BUEN USO DE ANTICIPO",
                proyecto: "PUENTE VEHICULAR",
                aseguradora: "EQUISUIZA",
                estado: "ACTIVA",
                numeroPoliza: "73363",
                montoCobertura: 24549.68,
                prima: 38.27,
                fechaInicio: "2024-12-25",
                fechaExpiracion: "2025-02-23",
                diasRestantes: 41,
                diasTotales: 60
            },
            {
                id: 9,
                contratante: "ETINAR",
                tipoFianza: "FIEL CUMPLIMIENTO DE CONTRATO",
                proyecto: "CENTRO MEDICO",
                aseguradora: "CONFIANZA",
                estado: "ACTIVA",
                numeroPoliza: "499485",
                montoCobertura: 816857.56,
                prima: 2042.14,
                fechaInicio: "2025-01-08",
                fechaExpiracion: "2025-02-07",
                diasRestantes: 25,
                diasTotales: 30
            },
            {
                id: 10,
                contratante: "DESINELEC / ETINAR",
                tipoFianza: "BUEN USO DE ANTICIPO",
                proyecto: "HIPERMARKET",
                aseguradora: "CONFIANZA",
                estado: "ACTIVA",
                numeroPoliza: "182955",
                montoCobertura: 320490.29,
                prima: 2670.75,
                fechaInicio: "2025-02-27",
                fechaExpiracion: "2025-07-27",
                diasRestantes: 195,
                diasTotales: 150
            }
        ];

        // Usuarios válidos (en producción esto estaría en un backend seguro)
        const validUsers = [
            { username: "etinar", password: "etinar2025", name: "Cliente Etinar" },
            { username: "admin", password: "orchard2025", name: "Administrador" },
            { username: "analista1", password: "analista2025", name: "Analista 1" },
            { username: "analista2", password: "analista2025", name: "Analista 2" },
            { username: "supervisor", password: "super2025", name: "Supervisor" }
        ];

        function LoginScreen({ onLogin }) {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                const user = validUsers.find(u => u.username === username && u.password === password);
                
                if (user) {
                    onLogin(user);
                } else {
                    setError('Usuario o contraseña incorrectos');
                }
            };

            return (
                <div className="login-container">
                    <div className="login-card">
                        <div className="login-logo">
                            <svg width="80" height="80" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="#2d5016" stroke="#2c3e50" strokeWidth="3"/>
                                <path d="M50 20 Q30 30 30 45 Q30 55 35 60 Q40 65 45 65 Q48 65 50 63 Q52 65 55 65 Q60 65 65 60 Q70 55 70 45 Q70 30 50 20 Z" fill="white"/>
                                <rect x="48" y="60" width="4" height="20" fill="white"/>
                            </svg>
                        </div>
                        <h1 className="login-title">Portal de Pólizas</h1>
                        <p className="login-subtitle">Orchard Assistance S.A.</p>
                        
                        {error && <div className="error-message">{error}</div>}
                        
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label>Usuario</label>
                                <input 
                                    type="text" 
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    placeholder="Ingrese su usuario"
                                    required
                                />
                            </div>
                            <div className="form-group">
                                <label>Contraseña</label>
                                <input 
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="Ingrese su contraseña"
                                    required
                                />
                            </div>
                            <button type="submit" className="login-btn">
                                Iniciar Sesión
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        function Dashboard({ user, onLogout, polizas }) {
            const [filters, setFilters] = useState({
                contratante: '',
                aseguradora: '',
                estado: '',
                search: ''
            });

            // Calcular estadísticas
            const stats = useMemo(() => {
                const total = polizas.length;
                const vencidas = polizas.filter(p => p.diasRestantes < 0).length;
                const proximas = polizas.filter(p => p.diasRestantes >= 0 && p.diasRestantes <= 30).length;
                const activas = polizas.filter(p => p.diasRestantes > 30).length;
                const montoTotal = polizas.reduce((sum, p) => sum + p.montoCobertura, 0);

                return { total, vencidas, proximas, activas, montoTotal };
            }, [polizas]);

            // Filtrar pólizas
            const filteredPolizas = useMemo(() => {
                return polizas.filter(poliza => {
                    if (filters.contratante && !poliza.contratante.includes(filters.contratante)) return false;
                    if (filters.aseguradora && poliza.aseguradora !== filters.aseguradora) return false;
                    if (filters.estado) {
                        if (filters.estado === 'VENCIDA' && poliza.diasRestantes >= 0) return false;
                        if (filters.estado === 'PROXIMA' && (poliza.diasRestantes < 0 || poliza.diasRestantes > 30)) return false;
                        if (filters.estado === 'ACTIVA' && poliza.diasRestantes <= 30) return false;
                    }
                    if (filters.search) {
                        const searchLower = filters.search.toLowerCase();
                        return (
                            poliza.numeroPoliza.toLowerCase().includes(searchLower) ||
                            poliza.proyecto?.toLowerCase().includes(searchLower) ||
                            poliza.contratante.toLowerCase().includes(searchLower)
                        );
                    }
                    return true;
                });
            }, [polizas, filters]);

            const clearFilters = () => {
                setFilters({
                    contratante: '',
                    aseguradora: '',
                    estado: '',
                    search: ''
                });
            };

            const getStatusBadge = (diasRestantes) => {
                if (diasRestantes < 0) {
                    return <span className="status-badge vencida">
                        <span className="indicator red"></span> Vencida
                    </span>;
                } else if (diasRestantes <= 30) {
                    return <span className="status-badge proxima">
                        <span className="indicator yellow"></span> Próxima
                    </span>;
                } else {
                    return <span className="status-badge activa">
                        <span className="indicator green"></span> Activa
                    </span>;
                }
            };

            const formatMoney = (amount) => {
                return new Intl.NumberFormat('es-EC', {
                    style: 'currency',
                    currency: 'USD'
                }).format(amount);
            };

            const formatDate = (dateString) => {
                return new Date(dateString).toLocaleDateString('es-EC', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            };

            const exportToCSV = () => {
                const headers = ['Número Póliza', 'Contratante', 'Tipo Fianza', 'Proyecto', 'Aseguradora', 'Estado', 'Monto Cobertura', 'Prima', 'Fecha Inicio', 'Fecha Expiración', 'Días Restantes'];
                const rows = filteredPolizas.map(p => [
                    p.numeroPoliza,
                    p.contratante,
                    p.tipoFianza,
                    p.proyecto || '',
                    p.aseguradora,
                    p.diasRestantes < 0 ? 'VENCIDA' : p.diasRestantes <= 30 ? 'PROXIMA' : 'ACTIVA',
                    p.montoCobertura,
                    p.prima,
                    p.fechaInicio,
                    p.fechaExpiracion,
                    p.diasRestantes
                ]);

                let csvContent = headers.join(',') + '\n';
                rows.forEach(row => {
                    csvContent += row.join(',') + '\n';
                });

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `polizas_etinar_${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
            };

            return (
                <div className="dashboard">
                    <nav className="navbar">
                        <div className="navbar-brand">
                            <svg width="45" height="45" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="#2d5016" stroke="white" strokeWidth="3"/>
                                <path d="M50 20 Q30 30 30 45 Q30 55 35 60 Q40 65 45 65 Q48 65 50 63 Q52 65 55 65 Q60 65 65 60 Q70 55 70 45 Q70 30 50 20 Z" fill="white"/>
                                <rect x="48" y="60" width="4" height="20" fill="white"/>
                            </svg>
                            <div>
                                <div className="navbar-title">Portal de Pólizas Etinar</div>
                                <div style={{fontSize: '12px', opacity: 0.8}}>Orchard Assistance S.A.</div>
                            </div>
                        </div>
                        <div className="navbar-user">
                            <div className="user-info">
                                <div className="user-name">{user.name}</div>
                                <div className="user-role">Acceso Cliente</div>
                            </div>
                            <button className="logout-btn" onClick={onLogout}>
                                Cerrar Sesión
                            </button>
                        </div>
                    </nav>

                    <div className="container">
                        {/* Stats Cards */}
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="stat-label">Total Pólizas</div>
                                <div className="stat-value">{stats.total}</div>
                                <div className="stat-change">Todas las pólizas registradas</div>
                            </div>
                            <div className="stat-card alert">
                                <div className="stat-label">Vencidas</div>
                                <div className="stat-value" style={{color: 'var(--alert-red)'}}>{stats.vencidas}</div>
                                <div className="stat-change">Requieren renovación inmediata</div>
                            </div>
                            <div className="stat-card warning">
                                <div className="stat-label">Próximas a Vencer</div>
                                <div className="stat-value" style={{color: '#856404'}}>{stats.proximas}</div>
                                <div className="stat-change">Vencen en los próximos 30 días</div>
                            </div>
                            <div className="stat-card">
                                <div className="stat-label">Cobertura Total</div>
                                <div className="stat-value" style={{fontSize: '28px'}}>{formatMoney(stats.montoTotal)}</div>
                                <div className="stat-change">Suma de todas las coberturas</div>
                            </div>
                        </div>

                        {/* Filters */}
                        <div className="filters-section">
                            <div className="filters-title">Filtros</div>
                            <div className="filters-grid">
                                <div className="filter-group">
                                    <label>Contratante</label>
                                    <select 
                                        value={filters.contratante}
                                        onChange={(e) => setFilters({...filters, contratante: e.target.value})}
                                    >
                                        <option value="">Todos</option>
                                        <option value="ETINAR">ETINAR</option>
                                        <option value="VIGERANO">VIGERANO</option>
                                        <option value="LIPIDAVA">LIPIDAVA</option>
                                        <option value="DESINELEC">DESINELEC</option>
                                    </select>
                                </div>
                                <div className="filter-group">
                                    <label>Aseguradora</label>
                                    <select 
                                        value={filters.aseguradora}
                                        onChange={(e) => setFilters({...filters, aseguradora: e.target.value})}
                                    >
                                        <option value="">Todas</option>
                                        <option value="CONFIANZA">CONFIANZA</option>
                                        <option value="EQUISUIZA">EQUISUIZA</option>
                                    </select>
                                </div>
                                <div className="filter-group">
                                    <label>Estado</label>
                                    <select 
                                        value={filters.estado}
                                        onChange={(e) => setFilters({...filters, estado: e.target.value})}
                                    >
                                        <option value="">Todos</option>
                                        <option value="ACTIVA">Activas</option>
                                        <option value="PROXIMA">Próximas a Vencer</option>
                                        <option value="VENCIDA">Vencidas</option>
                                    </select>
                                </div>
                                <div className="filter-group">
                                    <label>Buscar</label>
                                    <input 
                                        type="text"
                                        placeholder="Póliza, proyecto..."
                                        value={filters.search}
                                        onChange={(e) => setFilters({...filters, search: e.target.value})}
                                    />
                                </div>
                            </div>
                            <button className="clear-filters-btn" onClick={clearFilters}>
                                Limpiar Filtros
                            </button>
                        </div>

                        {/* Table */}
                        <div className="table-section">
                            <div className="table-header">
                                <h2 className="table-title">
                                    Pólizas ({filteredPolizas.length})
                                </h2>
                                <button className="export-btn" onClick={exportToCSV}>
                                    Exportar a CSV
                                </button>
                            </div>
                            
                            {filteredPolizas.length === 0 ? (
                                <div className="no-data">
                                    No se encontraron pólizas con los filtros seleccionados
                                </div>
                            ) : (
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Estado</th>
                                            <th>Póliza</th>
                                            <th>Contratante</th>
                                            <th>Tipo Fianza</th>
                                            <th>Proyecto</th>
                                            <th>Aseguradora</th>
                                            <th>Monto Cobertura</th>
                                            <th>Prima</th>
                                            <th>Fecha Exp.</th>
                                            <th>Días Rest.</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {filteredPolizas.map((poliza) => (
                                            <tr key={poliza.id}>
                                                <td>{getStatusBadge(poliza.diasRestantes)}</td>
                                                <td><strong>{poliza.numeroPoliza}</strong></td>
                                                <td>{poliza.contratante}</td>
                                                <td>
                                                    <span className={`tag ${poliza.tipoFianza.toLowerCase().includes('fiel') ? 'fiel-cumplimiento' : poliza.tipoFianza.toLowerCase().includes('buen') ? 'buen-uso' : 'responsabilidad'}`}>
                                                        {poliza.tipoFianza.length > 25 ? poliza.tipoFianza.substring(0, 25) + '...' : poliza.tipoFianza}
                                                    </span>
                                                </td>
                                                <td>{poliza.proyecto || '-'}</td>
                                                <td>
                                                    <span className={`tag ${poliza.aseguradora.toLowerCase()}`}>
                                                        {poliza.aseguradora}
                                                    </span>
                                                </td>
                                                <td className="money">{formatMoney(poliza.montoCobertura)}</td>
                                                <td>{formatMoney(poliza.prima)}</td>
                                                <td>{formatDate(poliza.fechaExpiracion)}</td>
                                                <td>
                                                    <strong style={{color: poliza.diasRestantes < 0 ? 'var(--alert-red)' : poliza.diasRestantes <= 30 ? '#856404' : 'var(--alert-green)'}}>
                                                        {poliza.diasRestantes < 0 ? `Vencida (${Math.abs(poliza.diasRestantes)}d)` : `${poliza.diasRestantes} días`}
                                                    </strong>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function App() {
            const [user, setUser] = useState(null);

            const handleLogin = (userData) => {
                setUser(userData);
            };

            const handleLogout = () => {
                setUser(null);
            };

            return (
                <>
                    {!user ? (
                        <LoginScreen onLogin={handleLogin} />
                    ) : (
                        <Dashboard 
                            user={user} 
                            onLogout={handleLogout}
                            polizas={mockPolizasData}
                        />
                    )}
                </>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
